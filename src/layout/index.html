<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TRADE MANAGER PRO</title>
    <link rel="stylesheet" href="../assets/styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
   <div class="header">
       <h1 class="app-title">TRADE MANAGER PRO</h1>
       <div class="header-controls">
         <button id="logs-btn" class="btn menu">
             <i class="fas fa-list"></i>
         </button>
         <button id="back-btn" class="btn menu hidden">
           <i class="fas fa-chevron-right"></i>
         </button>
         <button id="settings-btn" class="btn menu">
             <i class="fas fa-cog"></i>
         </button>
       </div>
   </div>
 
   <div class="container">
     <!-- Conte√∫do Principal -->
     <div class="current-settings">
       <div class="settings-grid">      
         <!-- Coluna 1 -->
         <div class="settings-group">
           <strong>Estrat√©gia de Opera√ß√µes</strong>
           <div id="current-gale" class="gale-status">Gale: Desativado</div>
           <div id="current-profit">Lucro Di√°rio: R$ 0</div>
           <div id="current-stop">Stop Loss: R$ 0</div>
         </div>
       
         <!-- Coluna 2 -->
         <div class="settings-group">
           <strong>Controle de Opera√ß√µes</strong>
           <div id="automation-status" class="automation-status">Automa√ß√£o: Inativa</div>
           <div id="current-value">Valor de entrada: R$ 0</div>
           <div id="current-time">Periodo: 0m</div>
         </div>
       </div>
     </div>
         <div class="settings-grid">
         <button id="start-operation" class="action-button">          
           <img src="../assets/icons/automation-icon.png" class="button-icon" alt="Analisar">
           Iniciar Automatico</button>
         <button id="cancel-operation" class="action-button" >
           <img src="../assets/icons/close-icon.png" class="button-icon" alt="Cancelar">
           Cancelar Opera√ß√£o</button>
           <button id="captureBtn" class="action-button common-button" >
             <img src="../assets/icons/screenshot.png" class="button-icon" alt="Capturar">
             Capturar Grafico
           </button>
           <button id="analyzeBtn" class="action-button common-button">
             <img src="../assets/icons/gemini-icon.png" class="button-icon" alt="Analisar">
             Iniciar Analise
           </button>
 
       <div class="settings-group">  
         <strong>Ganhos e Perdas:</strong>  
         <div id="last-profit" >Lucro atual: <span id="profitCurrent">0</span></div>
       </div>
     </div>

     <!-- Sistema de Gale - Bot√µes para teste -->
     <div class="gale-test-panel hidden" id="gale-test-panel">
        <h3>Sistema de Gale - Testes</h3>
        <div class="gale-status-info">
            <span>Status do Gale: </span>
            <span id="gale-level">N√≠vel 0</span> | 
            <span id="gale-value">Valor atual: R$ 0</span>
        </div>
        <div class="gale-test-buttons">
            <button id="simulate-loss" class="btn common-button">
                <i class="fas fa-arrow-down"></i> Simular Perda (Aplicar Gale)
            </button>
            <button id="simulate-win" class="btn common-button">
                <i class="fas fa-arrow-up"></i> Simular Ganho (Resetar Gale)
            </button>
            <button id="check-gale-status" class="btn secondary">
                <i class="fas fa-info-circle"></i> Verificar Status
            </button>
        </div>
        <!-- Novo bot√£o para teste de captura de payout -->
        <div class="gale-test-buttons" style="margin-top: 10px;">
            <button id="test-capture-payout" class="btn secondary">
                <i class="fas fa-percentage"></i> Testar Captura de Payout
            </button>
            <div id="payout-result" class="payout-result" style="margin-top: 5px; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
                Resultado: Nenhum teste executado
            </div>
        </div>

        <!-- Teste de Modal de Ativos -->
        <div class="modal-test-buttons" style="margin-top: 15px; border-top: 1px solid #ccc; padding-top: 15px;">
            <h4 style="margin: 0 0 10px 0; color: #333;">üîß Debug Modal de Ativos</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
                <button id="debug-open-modal" class="btn secondary">
                    <i class="fas fa-folder-open"></i> Abrir Modal
                </button>
                <button id="debug-close-modal" class="btn secondary">
                    <i class="fas fa-times"></i> Fechar Modal
                </button>
                <button id="debug-check-status" class="btn secondary">
                    <i class="fas fa-search"></i> Verificar Status
                </button>
                <button id="debug-toggle-modal" class="btn secondary" style="background-color: #ff9800;">
                    <i class="fas fa-exchange-alt"></i> Toggle Modal
                </button>
            </div>
            <div id="modal-debug-result" class="modal-debug-result" style="margin-top: 5px; padding: 8px; border: 1px solid #ddd; border-radius: 3px; background: #f9f9f9; font-size: 12px; max-height: 120px; overflow-y: auto; font-family: monospace;">
                Debug: Nenhum teste executado
            </div>
        </div>
        
        <!-- Novo painel para teste de troca de ativos -->
        <div class="asset-test-buttons" style="margin-top: 15px; border-top: 1px solid #ccc; padding-top: 15px;">
            <h4 style="margin: 0 0 10px 0; color: #333;">Teste de Troca de Ativos</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
                <button id="test-open-asset-modal" class="btn secondary">
                    <i class="fas fa-list"></i> Abrir Modal de Ativos
                </button>
                <button id="test-find-best-asset" class="btn secondary">
                    <i class="fas fa-search"></i> Buscar Melhor Ativo
                </button>
                <button id="test-switch-to-crypto" class="btn secondary">
                    <i class="fab fa-bitcoin"></i> Mudar para Crypto
                </button>
                <button id="test-switch-to-currency" class="btn secondary">
                    <i class="fas fa-dollar-sign"></i> Mudar para Moedas
                </button>
            </div>
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                <label style="font-size: 12px;">Payout M√≠nimo:</label>
                <input id="min-payout-input" type="number" value="85" min="50" max="100" style="width: 60px; padding: 2px;">
                <span style="font-size: 12px;">%</span>
            </div>
            <div id="asset-test-result" class="asset-test-result" style="margin-top: 5px; padding: 8px; border: 1px solid #ddd; border-radius: 3px; background: #f9f9f9; font-size: 12px; max-height: 120px; overflow-y: auto;">
                Resultado: Nenhum teste executado
            </div>
        </div>
        

     </div>
 
     <div class="operations-table">
         <table>
             <thead>
                 <tr>
                     <th>Hora</th>
                     <th>Moeda</th>
                     <th>Opera√ß√£o</th>
                     <th>Valor</th>
                     <th>Lucro</th>                    
                 </tr>
             </thead>
             <tbody id="operations-body"></tbody>
         </table>
     </div>
 
     <div id="historyList" class="history-list"></div>
     <div class="btn-group">
         <button id="export-csv" class="btn secondary">Exportar CSV</button>
         <button id="clear-history" class="btn secondary">Limpar Hist√≥rico</button>
     </div>
   </div>
 
   <div class="global-footer">
     <div id="status-processo" class="status-processo info">
       Status: Sistema operando normalmente
     </div>
     <div class="version-info">
         Trade Manager Layout v<span id="version"></span>
     </div>
   </div>
 
   <!-- Modal de Resultados -->
   <div id="analysis-modal" class="modal">
     <div class="modal-content">
         <div class="modal-header">
             <div class="modal-title">
                 <h2>Resultado da An√°lise</h2>
             </div>
             <div class="modal-controls">
                 <div class="countdown-info">
                     <span id="countdown">15s</span>
                     <span id="info-icon" class="info-icon" title="Clique duas vezes para cancelar o fechamento autom√°tico">i</span>
                 </div>
                 <button id="close-modal" class="btn menu">
                     <img src="../assets/icons/close-icon.png" class="close-icon" alt="Fechar">
                 </button>
             </div>
         </div>
         <div class="modal-body">
             <div id="test-mode-warning" class="test-mode-warning">
                 <i class="fas fa-exclamation-triangle"></i> MODO TESTE ATIVADO
                 <p>Esta an√°lise usa um algoritmo simplificado e pode n√£o ser precisa para opera√ß√µes reais. Use apenas para fins de teste e desenvolvimento.</p>
             </div>
             <div class="result-item">
                 <strong>A√ß√£o:</strong>
                 <span id="result-action" class="result-action">-</span>
             </div>
             <div class="result-item">
                 <strong>Confian√ßa:</strong>
                 <span id="result-confidence">-</span>
             </div>
             <div class="result-item">
                 <strong>Per√≠odo:</strong>
                 <span id="result-period">-</span>
             </div>
             <div class="result-item">
                 <strong>Valor de Entrada:</strong>
                 <span id="result-value">-</span>
             </div>
             <div class="result-item">
                 <strong>Resumo:</strong>
                 <div id="result-reason" class="result-reason">-</div>
             </div>
             <div class="modal-actions">
                 <button id="execute-action" class="btn confirm-btn">
                     <i class="fas fa-check"></i> Executar Opera√ß√£o
                 </button>
                 <button id="cancel-action" class="btn secondary">
                     <i class="fas fa-times"></i> Cancelar
                 </button>
                 <button id="wait-action" class="btn wait-btn" style="display: none; background-color: #ff9800;">
                     <i class="fas fa-clock"></i> <span id="wait-text">Aguardar</span>
                 </button>
             </div>
         </div>
     </div>
   </div>
 
   <script src="../content/log-sys.js"></script>
   <script src="../content/analyze-graph.js"></script>
   <script src="../content/navigation.js"></script>
   <script src="../content/state-manager.js" defer></script>
   <script src="../content/gale-system.js" defer></script>
   <script src="../content/trade-history.js" defer></script>
   <script src="../content/modal-analyze.js" defer></script>
   <script src="../content/capture-screen.js" defer></script>
   <script src="../content/index.js" defer></script>
   <script src="../content/automation.js" defer></script>

   <style>
    .gale-test-panel {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        margin: 15px 0;
    }
    
    .gale-test-panel h3 {
        margin-top: 0;
        margin-bottom: 10px;
        color: #333;
    }
    
    .gale-status-info {
        margin-bottom: 15px;
        font-size: 14px;
    }
    
    .gale-test-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    #simulate-loss {
        background-color: #ff6b6b;
    }
    
    #simulate-win {
        background-color: #51cf66;
    }
    
    #check-gale-status {
        background-color: #339af0;
    }
    
    /* Estilos para o bot√£o WAIT */
    .wait-btn {
        background-color: #ff9800;
        color: white;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    
    .wait-btn:hover {
        background-color: #f57c00;
    }
    
    /* Estilos para a a√ß√£o WAIT no modal */
    .result-action.wait {
        background-color: #ff9800;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
   </style>
</body>
</html>