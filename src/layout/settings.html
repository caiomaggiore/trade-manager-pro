<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Manager Pro - Configurações</title>
    <link rel="stylesheet" href="../assets/styles/style.css">
    <link rel="stylesheet" href="../assets/styles/subpage.css">
    <link rel="stylesheet" href="../assets/styles/subpage-fix.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="subpage">
    <div class="page-header">
        <h2>Configurações</h2>
        <button id="close-settings" class="btn menu">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <div class="content">
        <!-- Configurações de Risco e Operação -->
        <div class="main-panel">
            <div class="main-panel-header">
                <h3><i class="fas fa-shield-alt"></i> Configurações de Trading</h3>
                <p class="main-panel-description">Parâmetros principais para controle de risco e operações</p>
            </div>

            <!-- Controle de Risco e Parâmetros de Operação (2 colunas) -->
            <div class="panel-grid-2">
                <!-- Coluna 1: Controle de Risco -->
                <div class="sub-panel">
                    <h4 class="sub-panel-header"><i class="fas fa-shield-alt"></i> <span class="title-break">Controle de<br>Risco</span></h4>
                    
                    <div class="automation-control">
                        <div class="automation-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="toggleGale" checked>
                                <span class="slider"></span>
                            </label>
                            <span class="automation-label">Gale Ativo</span>
                        </div>
                    </div>

                    <div class="panel-item">
                        <span class="panel-item-label">Lucro de Gale (%):</span>
                        <select id="gale-select" class="styled-select">
                            <option value="0%">0% (Sem Lucro)</option>
                            <option value="5%">5%</option>
                            <option value="10%">10%</option>
                            <option value="15%">15%</option>
                            <option value="20%" selected>20%</option>
                            <option value="25%">25%</option>
                            <option value="30%">30%</option>
                            <option value="40%">40%</option>
                            <option value="50%">50%</option>
                        </select>
                    </div>

                    <div class="panel-item">
                        <span class="panel-item-label">Lucro Diário (R$):</span>
                        <input type="number" id="daily-profit" class="styled-select" min="0">
                    </div>

                    <div class="panel-item">
                        <span class="panel-item-label">Stop Loss (R$):</span>
                        <input type="number" id="stop-loss" class="styled-select" min="0">
                    </div>
                </div>

                <!-- Coluna 2: Parâmetros de Operação -->
                <div class="sub-panel">
                    <h4 class="sub-panel-header"><i class="fas fa-cogs"></i> <span class="title-break">Parâmetros de<br>Operação</span></h4>
                    
                    <div class="automation-control">
                        <div class="automation-wrapper">
                            <label class="switch">
                                <input type="checkbox" id="toggleAuto">
                                <span class="slider"></span>
                            </label>
                            <span class="automation-label">Automação</span>
                        </div>
                    </div>
                    
                    <div class="panel-item">
                        <span class="panel-item-label">Valor:</span>
                        <input type="number" id="trade-value" class="styled-select" min="1">
                    </div>
                    
                    <div class="panel-item">
                        <span class="panel-item-label">Período:</span>
                        <input type="number" id="trade-time" class="styled-select" min="5">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Configurações de Payout -->
        <div class="main-panel">
            <div class="main-panel-header">
                <h3><i class="fas fa-percentage"></i> Configurações de Payout</h3>
                <p class="main-panel-description">Controle de payout mínimo e comportamento do sistema</p>
            </div>

            <!-- Configurações de Payout (coluna única) -->
            <div class="sub-panel">
                <h4 class="sub-panel-header"><i class="fas fa-chart-bar"></i> <span class="title-break">Controle de<br>Payout</span></h4>
                
                <div class="panel-item">
                    <span class="panel-item-label">Payout Mínimo (%):</span>
                    <select id="min-payout-select" class="styled-select">
                        <option value="50">50%</option>
                        <option value="55">55%</option>
                        <option value="60">60%</option>
                        <option value="65">65%</option>
                        <option value="70">70%</option>
                        <option value="75">75%</option>
                        <option value="80" selected>80%</option>
                        <option value="85">85%</option>
                        <option value="90">90%</option>
                    </select>
                </div>

                <div class="panel-item">
                    <span class="panel-item-label">Ação Payout Baixo:</span>
                    <select id="payout-behavior-select" class="styled-select">
                        <option value="cancel" selected>Cancelar Operação</option>
                        <option value="wait">Esperar Payout Adequado</option>
                        <option value="switch">Trocar de Ativo</option>
                    </select>
                </div>

                <div class="panel-item" id="payout-timeout-container" style="display:none;">
                    <span class="panel-item-label">Intervalo verificação (seg):</span>
                    <input type="number" id="payout-timeout" class="styled-select" min="1" max="60" value="5" placeholder="5">
                </div>

                <div class="panel-item" id="asset-switching-container" style="display:none;">
                    <span class="panel-item-label">Categoria Troca Ativos:</span>
                    <select id="asset-preferred-category" class="styled-select">
                        <option value="crypto" selected>Criptomoedas</option>
                        <option value="currency">Moedas</option>
                        <option value="commodity">Commodities</option>
                        <option value="stock">Ações</option>
                        <option value="index">Índices</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Configurações Avançadas -->
        <div class="main-panel">
            <div class="main-panel-header">
                <h3><i class="fas fa-tools"></i> Configurações Avançadas</h3>
                <p class="main-panel-description">Opções para desenvolvedores e testes do sistema</p>
            </div>

            <div class="sub-panel">
                <h4 class="sub-panel-header"><i class="fas fa-flask"></i> Modos de Teste e Desenvolvimento</h4>
                
                <div class="automation-control">
                    <div class="automation-wrapper">
                        <label class="switch">
                            <input type="checkbox" id="toggleTestMode">
                            <span class="slider"></span>
                        </label>
                        <span class="automation-label">Modo Teste de Análise</span>
                    </div>
                </div>
                <div class="setting-description">
                    <p>Quando ativado, o sistema usará um algoritmo de análise simplificado que produz resultados mais diretos, mas potencialmente menos precisos.</p>
                    <p class="warning-text">
                        <strong>Atenção:</strong> Este modo é para testes e desenvolvimento. Os resultados podem não ser confiáveis para operações reais.
                    </p>
                </div>

                <div class="automation-control">
                    <div class="automation-wrapper">
                        <label class="switch">
                            <input type="checkbox" id="toggleDevMode">
                            <span class="slider"></span>
                        </label>
                        <span class="automation-label">Modo Desenvolvedor</span>
                    </div>
                </div>
                <div class="setting-description">
                    <p>Quando ativado, exibe ferramentas e controles especiais para desenvolvedores, como o painel de testes do sistema de Gale.</p>
                    <p class="info-text">
                        <strong>Nota:</strong> Esta configuração destina-se apenas a desenvolvedores e não afeta o funcionamento normal do sistema.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <button id="save-settings" class="btn confirm-btn">
            <i class="fas fa-save"></i>
            <div class="button-content">
              <span>Salvar Configurações</span>
              <small>Aplica as alterações feitas</small>
            </div>
        </button> 
    </div>

    <!-- Carrega o StateManager primeiro -->
    <script src="../content/state-manager.js"></script>
    <!-- Carrega o sistema de logs -->
    <script src="../content/log-sys.js"></script>
    <!-- Carrega o PayoutController -->
    <script src="../content/payout-controller.js"></script>
    <!-- Depois carrega o settings.js -->
    <script src="../content/settings.js"></script>
</body>
</html> 